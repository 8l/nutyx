<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
     <link rel="shortcut icon" href="../favicon.ico">
     <link rel="stylesheet" href="../css/nutyx.css" />
  <title>NuTyX - Syntaxe minimale d'un port(recette de fabrication)</title>
    <table>
     <tr>
      <td width="30%">
            <a href=".."><img id="logo" src="../graphics/logo_nutyx_120.png" alt="logo nutyx" /></a>
      </td>
      <td>
       <nav>
            <li><a href=".">Accueil</a></li>
            <li><a href="information.html">Information</a></li>
            <li><a href="documentation.html">Documentation</a></li>
            <li><a href="installation.html">Installation</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="packages.html">Paquets</a></li>
            <li><a href="http://forum.nutyx.org/index.php?action=recent">Forum</a></li>
       </nav>
      </td>
     </tr>
    </table>
 </head>
 <hr>
   <h1>Syntaxe minimale d'un port (recette de fabrication)</h1>
     
   <div class="introduction">Voici un petit exemple de recette minimale avec tous les commentaires pour vous permettre de comprendre le principe de fonctionnement</div>
   <div class="description"><p>La fabrication d'un paquet binaire se fait via le fichier standard appelé<span style="text-decoration: underline;"> Pkgfile</span>. Ce fichier contient toutes les informations nécessaires pour pouvoir produire un paquet binaire qui pourra être installé par le gestionnaire de paquets.
   </div>
   <div>Les informations minimales pour pouvoir produire le binaire sont:
   </div>
   </li>
   <li> <em><strong>version</strong></em> spécifie la version des sources du paquet.
   </li>
   <li> <em><strong>source</strong></em> contient l'adresse des sources du paquet que l'on souhaite empaqueter.
   </li>
   <li> <em><strong>build()</strong></em> la fonction qui contient la recette proprement dite.
   </li>
   </br>
   <div>Un petit exemple "en image"</div>
   <pre class="output"># Version du paquets
version=2.6.4
# Emplacement des sources du paquet qui sera empaqueté
source=(http://ftp.gnome.org/pub/gnome/sources/$name/${version%.*}/$name-$version.tar.bz2)
# Recette proprement dite, souvent constitué des trois commandes standards
build() {
cd $name-$version
./configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info
make
make DESTDIR=$PKG install
}
   </pre>
   <div>Si vous comparez cet exemple avec un port officiel de NuTyX, vous constaterez que ce dernier dispose de plus d'informations. C'est ce que nous verrons dans un prochain article. Une ligne vous a sans doute attiré l'attention:
   </div>
   <pre class="output">http://ftp.gnome.org/pub/gnome/sources/$name/${version%.*}/
   </pre>
   <div>La syntaxe ${version%.*} permet de subsituer une valeur à N chiffres en une valeur à N -1 chiffres. C'est très souvent le cas chez les sources de gnome. Dans notre exemple donc, la ligne:
   </div>
   <pre class="output">http://ftp.gnome.org/pub/gnome/sources/$name/${version%.*}/
   </pre>
   est identique à
   <pre class="output">http://ftp.gnome.org/pub/gnome/sources/$name/2.6/
   </pre>
   <div>puisque la variable version=2.6.4
   </div>
  </div>
     <hr>
    <p class="updated">Dernière mise à jour 09-01-2015 19:24:13</p>
     <footer>
        <p id="foot">... <img src="../graphics/logo_nutyx_25.png" alt="nutyx petit logo"> ...<br />
        &copy; 2007 - 2015 <a href="http://nutyx.org">NuTyX</a></p>
    <p id="foot"><a href="http://www.wtfpl.net/"><img
       src="http://www.wtfpl.net/wp-content/uploads/2012/12/wtfpl-badge-4.png"
       width="80" height="15" alt="WTFPL" /></a></p>
    </footer>
 </body>
</html>

