<!DOCTYPE html>
<html>
    <head>
	<!-- En-tÃªte de la page -->
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../css/nutyx.css" />
        <title>NuTyX - Build rules for binary packages</title>
    </head>
    
 <body>
    <header>
      <a href=".."><img id="logo" src="../graphics/logo_nutyx_120.png" alt="logo nutyx" /></a>
    </header>
    <nav>
        <ul>
            <li><a href=".">Home</a></li>
            <li><a href="documentation.html">Documentation</a></li>
            <li><a href="install.html">Installation</a></li>
            <li><a href="contribute.html">Contribute</a></li>
            <li><a href="information.html">Information</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="http://forums.nutyx.org/index.php?action=recent">Forums</a></li>
            <li><a href="http://git.tuxfamily.org/?p=nutyx/saravane.git">Lasts changes</a></li>
            <li><a href="http://downloads.nutyx.org/saravane/PACKAGES.TXT">Packages</a></li>
        </ul>
    </nav>
  <h2>Practical exemple of a receipt to begin</h2>
<pre class="output">_name=libxfce4util
version=4.10.1
source=(http://downloads.nutyx.org/archives/xfce/src/xfce/${_name}/${version%.*}/${_name}-$version.tar.bz2)

build() {
cd ${_name}-$version
./configure --prefix=/usr \
--disable-static
make
make DESTDIR=$PKG install
}</pre>
<h2>Explanations</h2>
We wish always to describe what the package is about. The file <b>&lt;name_of_the_package.info&gt;</b> is going to be include in the binarie and will be used by the package manager <b>cards</b>. So the description is very important and should always be writen in english. It's important that it's all on one line.
<pre class="output">The libxfce4util package is a basic utility library for the Xfce desktop environment</pre>
The <b>maintainer</b> is (when possible) should point to the git location of the project in progress. The idea is that (in the future) cards can check and informed the packager in case of a new version available. If git is not available, the name of the maintainer(s) will be fine. It's important to mentionned them.
<pre class="output">Maintainer:
- git.xfce.org/xfce/xfce4-libutils</pre>
The <b>packager</b> is actually you, once you are able to build the package following the rules, you will have access to the git repository of all the available packages. We will be please to have you as new <b>packager.</b>
<pre class="output">Packager:
- tyrry at nutyx dot org</pre>
If you wish that the build server is able to build the package without trouble, it's important to specify the dependencies of your package. The file <b>&lt;name_of_the_package.deps&gt;</b> is specifying the list of dependencies. Dependencies are placed on one line each.
<pre class="output">glib
intltool
gtk-doc</pre>
If the name of the binary package is different from the sources of the package, we need to define a internal variable with the name of the source package. As the variable <b>name</b> is allready reserve, we should not used it but anything else. In our exemple, we used the variable <b>_name</b>
<pre class="output">_name=libxfce4util</pre>
Note that the variable <b>name </b> is set automatically by reading the name of the folder containing your receipt. So make shure you create a base folder with the correct "settings". Example to build correctly this package, it should be found in a folder name:
<pre class="output">xfce4-libutil</pre>
It's now time to get the sources of our package. It's declare in the next line. As you can see, we use the <b>_name</b> and <b>version</b> variables for this. For the rest of the line, if a patch is need for exemple, it can be added on the next line
<pre class="output">source=(http://downloads.nutyx.org/archives/xfce/src/xfce/${_name}/${version%.*}/${_name}-$version.tar.bz2
http://www.linuxfromscratch.org/patches/blfs/svn/$name-$version-contribs_lib-1.patch)</pre>
Then comes the function <b>build</b> which define what should be done. Most of the time, it's allways the same.
<pre class="output">build() {
cd ${_name}-$version
./configure --prefix=/usr \
--disable-static
make
make DESTDIR=$PKG install
}</pre>
        <!-- DEBUT FOOTER -->

    <footer>
        <p id="foot">... <img src="../graphics/logo_nutyx_25.png" alt="nutyx petit logo"> ...<br />
        &copy; 2007 - 2014 <a href="http://nutyx.org">NuTyX</a>.
    </footer>

 </body>
</html>
