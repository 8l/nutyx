version=3.2.1
source=(http://mercurial.selenic.com/release/$name-$version.tar.gz)

build() {
    cd $name-$version
    python2 setup.py install --prefix=/usr --root=$PKG

    install -d $PKG/usr/share/man/{man1,man5}
    install -m644 doc/hg.1 $PKG/usr/share/man/man1
    install -m644 doc/{hgrc.5,hgignore.5} $PKG/usr/share/man/man5
    install -m755 contrib/hgk $PKG/usr/bin
    install -m644 -D contrib/zsh_completion \
        $PKG/usr/share/zsh/site-functions/_hg
    install -m644 -D contrib/bash_completion \
        $PKG/usr/share/bash-completion/completions/hg
    install -d $PKG/usr/share/emacs/site-lisp
    install -m644 contrib/{mq.el,mercurial.el} \
        $PKG/usr/share/emacs/site-lisp
    install -Dm644 contrib/vim/HGAnnotate.vim \
        $PKG/usr/share/vim/vimfiles/syntax/HGAnnotate.vim

    install -v -d -m755 $PKG/etc/mercurial
    cat > $PKG/etc/mercurial/hgrc << EOF
[web]
cacerts = /etc/ssl/ca-bundle.crt
EOF
}



# NuTyX Pkgfile (http://nutyx.org)
